[pytest]
# Test discovery patterns
testpaths = tests
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Test markers for categorization
markers =
    unit: Fast unit tests (< 1 second each)
    integration: Integration tests (1-10 seconds each)
    slow: Slow end-to-end tests (10+ seconds each)
    autoencoder: Autoencoder model tests
    data: Data processing tests
    hyperopt: Hyperparameter optimization tests
    models: Model-specific tests (MLP, Linear, LightGBM)
    cli: Command-line interface tests
    inference: Inference pipeline tests
    training: Training workflow tests

# Minimum version requirement
minversion = 8.0

# Add paths for imports
pythonpath = src tests

# Test execution options
addopts =
    --verbose
    --tb=short
    --strict-markers
    --disable-warnings
    --color=yes
    --durations=10

# Coverage configuration (when pytest-cov is installed)
# --cov=src/scxpand
# --cov-report=term-missing
# --cov-report=html:htmlcov
# --cov-fail-under=80

# Ignore specific warnings
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning:anndata.*

# Test collection options
collect_ignore = setup.py build dist
